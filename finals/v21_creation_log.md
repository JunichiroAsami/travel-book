# v21作成ログ

## 作成日時
2025-12-04 09:06

## 作成プロセス

### 1. v17からの復元
- v17の章ごとのファイル（`v17_part_*.md`）から個別章ファイルを復元
- v17は以下の特徴を持つ最も完全な状態:
  - ✅ テーブル区切り線 `|---|---|` が正しく保持
  - ✅ v13の28箇所の修正（「本章の使い方」など）が反映
  - ✅ すべての章が揃っている

### 2. クイックスタートガイドの修正
- 見出しを「# 今すぐ使える!AIプロンプト9選」から「# クイックスタートガイド」に修正

### 3. 統合マークダウンの作成
- 17個の個別章ファイルから統合マークダウン `complete_manuscript_v21.md` を作成
- 章の区切りには `\newpage` を使用（`---` はPandocがコードブロックと誤認識するため使用しない）

### 4. Word文書の作成
- 17個の個別章ファイルをそれぞれWord形式に変換
- python-docxで17個のWord文書を結合
- 参考文書: `/home/ubuntu/upload/野沢温泉探訪記～世界が注目する村の魅力と地域戦略のリアル第２版ｘサイズ調整.docx`

### 5. 検証結果
- ✅ 見出し1の数: 17（期待値: 17）
- ✅ 見出し2の数: 129
- ✅ 見出し3の数: 244
- ✅ テーブルの数: 15

## ファイル一覧

### 統合ファイル
- `complete_manuscript_v21.md` - 統合マークダウン（431KB）
- `complete_manuscript_v21_final.docx` - 統合Word文書（154KB）

### 章ごとのファイル（バックアップ）
- `v21_part_00_quickstart.md` - クイックスタートガイド
- `v21_part_01_preface.md` - はじめに
- `v21_part_02_chapter01.md` - 第1章
- `v21_part_03_chapter02.md` - 第2章
- `v21_part_04_chapter03.md` - 第3章
- `v21_part_05_chapter04.md` - 第4章
- `v21_part_06_chapter05.md` - 第5章
- `v21_part_07_chapter06.md` - 第6章
- `v21_part_08_chapter07.md` - 第7章
- `v21_part_09_chapter08.md` - 第8章
- `v21_part_10_chapter09.md` - 第9章
- `v21_part_11_chapter10.md` - 第10章
- `v21_part_12_chapter11.md` - 第11章
- `v21_part_13_chapter12.md` - 第12章
- `v21_part_14_afterword.md` - おわりに
- `v21_part_15_appendix_b.md` - 付録B
- `v21_part_16_appendix_c.md` - 付録C

## v13からv21までの主な変更点

### v13の28箇所の修正（すべて保持）
- 各章に「本章の使い方」セクションを追加
- 第3部と付録Bの相互参照を追加
- クイックスタートガイドを追加

### v20で発生した問題（v21で修正）
- ❌ v20: テーブル区切り線 `|---|---|` が誤って削除された
- ✅ v21: v17から復元してテーブル区切り線を保持

### v21で追加された修正
- クイックスタートガイドの見出しを「# クイックスタートガイド」に統一

## 次回のバージョン作成時の注意事項

1. **個別章ファイルが最新のベース**
   - `quickstart.md`, `preface.md`, `chapter1_final.md`, ... `appendix_c_final.md`
   - これらのファイルを修正してから統合ファイルを生成する

2. **バージョン管理**
   - 新しいバージョンを作成する前に、現在のバージョンを `v{番号}_part_*.md` として保存
   - 例: v22を作成する前に、v21の章ごとのファイルを `v21_part_*.md` として保存（完了済み）

3. **Word変換のプロセス**
   - 17個の個別章ファイルをそれぞれWord形式に変換
   - python-docxで結合（`merge_all_chapters.py`を使用）
   - 検証（`verify_v21_structure.py`を使用）

4. **テーブル区切り線の保持**
   - マークダウンのテーブルには必ず区切り線 `|---|---|` を含める
   - この区切り線がないとPandocがテーブルとして認識しない

5. **章の区切り**
   - 統合マークダウンでは `\newpage` を使用
   - `---` は使用しない（Pandocがコードブロックと誤認識する）
